â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  MEDWAVE EMAIL NOTIFICATION SETUP INSTRUCTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“§ Email Service: Resend (https://resend.com)
âœ… All code is implemented and ready to go!

You just need to complete these setup steps:

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 1: CREATE RESEND ACCOUNT & GET API KEY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Go to: https://resend.com
2. Sign up for a free account (no credit card required)
3. Once logged in, go to "API Keys" section
4. Click "Create API Key"
5. Give it a name: "MedWave Production"
6. Copy the API key (starts with "re_...")

FREE TIER LIMITS:
â€¢ 3,000 emails per month
â€¢ 100 emails per day
â€¢ Perfect for starting out!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 2: CONFIGURE FIREBASE FUNCTIONS WITH API KEY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Run this command (replace YOUR_API_KEY with your actual key):

firebase functions:config:set resend.api_key="re_YOUR_ACTUAL_API_KEY_HERE"

Example:
firebase functions:config:set resend.api_key="re_abc123xyz789..."

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 3: DEPLOY FIREBASE FUNCTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Deploy the new email functions to Firebase:

cd /Users/mac/dev/medwave
firebase deploy --only functions

This will deploy:
âœ… sendAppointmentBookingEmail - Sends booking confirmation
âœ… sendAppointmentConfirmedEmail - Sends confirmed/cancelled emails
âœ… confirmAppointmentViaEmail - Handles email link confirmations
âœ… scheduleAppointmentReminders - Daily job to send reminders

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 4: UPDATE EMAIL "FROM" ADDRESS (OPTIONAL BUT RECOMMENDED)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

By default, emails will come from: appointments@medwave.app

To use your own domain:

1. In Resend dashboard, go to "Domains"
2. Add your domain (e.g., medwave.com or yourdomain.com)
3. Add the DNS records they provide to your domain registrar
4. Wait for verification (usually 5-10 minutes)
5. Update the "from" field in: functions/lib/emailService.js
   
   Change line 41 from:
   from: 'MedWave <appointments@medwave.app>',
   
   To:
   from: 'MedWave <appointments@yourdomain.com>',

6. Redeploy: firebase deploy --only functions

FOR TESTING: You can skip this and use the default sender address.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP 5: UPDATE CONFIRMATION URL (IMPORTANT!)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Update the confirmation link URL in functions/lib/emailService.js

Find line 39 and replace with your actual Firebase project URL:

const confirmationUrl = `https://YOUR-PROJECT-ID.web.app/confirm-appointment/${appointment.id}`;

OR use your Cloud Functions URL:

const confirmationUrl = `https://us-central1-YOUR-PROJECT-ID.cloudfunctions.net/confirmAppointmentViaEmail?id=${appointment.id}`;

To find your Cloud Functions URL:
firebase functions:list

Look for: confirmAppointmentViaEmail

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TESTING THE SYSTEM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Run the app and create a new appointment
2. Make sure to enter a patient email address
3. Check the email inbox - you should receive:
   âœ… Booking confirmation email with "Confirm Appointment" button
   
4. Click "Confirm Appointment" button
5. Appointment status changes to "Confirmed"
6. Check email again - you should receive:
   âœ… Appointment confirmed email

7. The reminder email will be sent automatically 24 hours before
   the appointment (runs daily at 9 AM)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ Check Firebase Functions Logs:
firebase functions:log --only sendAppointmentBookingEmail

ğŸ” Common Issues:

1. "Resend not initialized" error
   â†’ API key not set. Run: firebase functions:config:get
   â†’ Should show: resend.api_key

2. Emails not sending
   â†’ Check Resend dashboard for failed sends
   â†’ Verify email address format is correct
   â†’ Check Firebase Functions logs

3. Confirmation link not working
   â†’ Update the confirmationUrl in emailService.js
   â†’ Make sure function is deployed

4. Patient email field not showing
   â†’ Run: flutter clean
   â†’ Run: flutter pub get
   â†’ Restart the app

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MONITORING & ANALYTICS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Resend Dashboard:
â€¢ View all sent emails
â€¢ Check delivery status
â€¢ See open rates (if you enable tracking)
â€¢ Monitor failures

Firebase Functions Dashboard:
â€¢ View function invocations
â€¢ Check for errors
â€¢ Monitor performance

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
WHAT'S INCLUDED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“§ Email Types:
1. Booking Confirmation - Sent when appointment is created
2. Appointment Confirmed - Sent when patient confirms
3. Appointment Reminder - Sent 24 hours before (daily cron job)
4. Cancellation Email - Sent when appointment is cancelled

ğŸ¨ Email Features:
â€¢ Beautiful HTML templates with gradients
â€¢ Mobile-responsive design
â€¢ Professional branding
â€¢ Clear call-to-action buttons
â€¢ Appointment details displayed nicely

ğŸ”’ Security:
â€¢ Email validation in the app
â€¢ Secure confirmation links
â€¢ No sensitive data in emails
â€¢ HIPAA-compliant approach

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
COST ESTIMATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Resend Free Tier: 3,000 emails/month

Scenario 1: Small Practice
â€¢ 10 patients/day
â€¢ 2 emails per patient (booking + confirmation)
â€¢ 20 emails/day = 600/month
â€¢ Cost: FREE âœ…

Scenario 2: Medium Practice  
â€¢ 50 patients/day
â€¢ 2 emails per patient + reminders
â€¢ 150 emails/day = 4,500/month
â€¢ Cost: $20/month (Pro plan)

Scenario 3: Large Practice
â€¢ 100 patients/day
â€¢ 3 emails per patient
â€¢ 300 emails/day = 9,000/month
â€¢ Cost: $20/month (Pro plan covers up to 50,000/month)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NEXT STEPS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… Get Resend API key
2. âœ… Configure Firebase Functions
3. âœ… Deploy functions
4. âœ… Update confirmation URL
5. âœ… Test with a real appointment
6. ğŸ‰ You're done!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SUPPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Resend Documentation: https://resend.com/docs
Resend Support: help@resend.com
Firebase Functions Docs: https://firebase.google.com/docs/functions

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Need help? Check the Firebase Functions logs or Resend dashboard!

